# スキャン設定（PoC）
roots:
  # 例: Windowsファイルサーバーの共有をマウントしたパス or UNCパス
  # - "\\FILESRV01\share\DesignDocs"
  - "/path/to/design-docs"

include_ext:
  - ".docx"
  - ".xlsx"
  - ".pptx"
  - ".pdf"
  - ".md"
  - ".txt"
  - ".sql"

# Windowsショートカット(.lnk)を解決してリンク先もスキャンするか
# ※安全のためデフォルトは「roots配下に解決できるものだけ」を追跡
shortcuts:
  enabled: true
  # .lnk の解決結果がディレクトリだった場合も辿る（=追加rootとして再帰）
  follow_dir_targets: true
  # roots外への解決を許可する（情報漏えい/想定外スキャンを避けたい場合はfalse推奨）
  allow_outside_roots: false
  # ショートカット多段（lnk→lnk→...）の最大深さ
  max_chain: 2

exclude_dirs:
  - ".git"
  - ".svn"
  - "node_modules"
  - "__pycache__"

# フォルダ名に「含まれるキーワード」で除外（部分一致）
# 例: "Project_old" / "backup_2025" / "削除予定" なども除外したい場合に使う
exclude_dir_keywords:
  - "old"
  - "backup"
  - "削除"
  - "archive"

# 正規表現（パス全体）で除外したいもの
exclude_path_regex:
  - "(?i)\\\\\$recycle\.bin"
  - "(?i)\\\\\$RECYCLE\.BIN"
  - "(?i)/\.trash"
  - "(?i)/~\$"   # Office一時ファイルっぽいもの（必要なら調整）

# 抽出量の上限（PoCでは“内容を載せすぎない”ための安全装置）
max_extract_chars: 8000
max_headings: 40
max_preview_paragraphs: 12
max_preview_cells: 80
max_preview_slides: 30

# 生成する要約文（抽出型）/キーワード
summary_sentences: 3
keywords_topk: 15

# マスク（必要に応じて追加）
redact:
  enabled: true
  patterns:
    - name: "email"
      regex: "(?i)[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}"
      replace: "[REDACTED_EMAIL]"
    - name: "phone_jp"
      regex: "(?:0\d{1,4}-\d{1,4}-\d{3,4}|0\d{9,10})"
      replace: "[REDACTED_PHONE]"
    - name: "ipv4"
      regex: "\b(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\b"
      replace: "[REDACTED_IP]"
    - name: "password_like"
      regex: "(?i)(password|passwd|pwd)\s*[:=]\s*\S+"
      replace: "\1: [REDACTED]"

# システム名推定：パスから抽出（例）
# 例: /design-docs/Payroll/... なら system=Payroll
system_from_path:
  enabled: true
  # roots配下の「1階層目」をシステム名とする（多くの会社で効きやすい）
  depth_from_root: 1

# 画面ID推定（例: A001, SCR-012 など）
screen_id_regex:
  - "(?i)\b([A-Z]{1,3}-?\d{2,4})\b"

# ドキュメント種別推定（日本語/英語混在想定）
doc_type_rules:
  - contains_any: ["画面設計", "UI設計", "Screen Design"]
    doc_type: "画面設計"
  - contains_any: ["基本設計", "基本設計書", "Basic Design"]
    doc_type: "基本設計"
  - contains_any: ["詳細設計", "詳細設計書", "Detail Design"]
    doc_type: "詳細設計"
  - contains_any: ["テスト仕様", "Test Spec", "試験仕様"]
    doc_type: "テスト仕様"
  - contains_any: ["API仕様", "IF仕様", "Interface", "API Spec"]
    doc_type: "IF/API仕様"

# 最新版マップを出力するか
latest_map:
  enabled: true
  # group key: (system, screen_id, doc_type) が揃わない場合のフォールバックを許す
  allow_fallback_keys: true
